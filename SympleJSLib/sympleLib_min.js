/*
 * JSMin
 * Javascript Compressor
 * http://www.crockford.com/
 * http://www.smallsharptools.com/Projects/Packer/
*/

// Source\sympleTech_Ajax.js

$.fn.sympleTech_ajaxlink=function(options){var settings=$.extend({'httpMethod':'GET','showHideLoaderMethod':function(show){},'onComplete':function(data){}},options);return this.each(function(){var href=$(this).attr('href');$(this).click(function(e){e.preventDefault();e.stopPropagation();settings.showHideLoaderMethod(true);$.ajax({url:href,type:settings.httpMethod,success:function(data){settings.onComplete(data);settings.showHideLoaderMethod(false);}});});});};$.fn.sympleTech_ajaxform=function(options){var settings=$.extend({'showHideLoaderMethod':function(show){},'requiredFields':[],'requiredFieldClass':'field-required','errorMessageTarget':'','fieldErrorClass':'field-error','beforeSubmit':function(valState){},'action':$(this).attr("action"),'onComplete':function(data){}},options);var validationState={isValid:true,errorMessage:''};var checkRequiredFields=function(form){for(var i in settings.requiredFields){var rField=$(form).find('*[name="'+settings.requiredFields[i]+'"]');if($(rField).val()==""){validationState.errorMessage+="<li>"+$(rField).attr("name")+" is Required</li>";$(rField).addClass(settings.fieldErrorClass);validationState.isValid=false;}else{$(rField).removeClass(settings.fieldErrorClass);}}};return this.each(function(){for(var i=0;i<settings.requiredFields.length;i++){$(this).find('*[name="'+settings.requiredFields[i]+'"]').addClass(settings.requiredFieldClass);}
$(this).submit(function(e){e.preventDefault();settings.showHideLoaderMethod(true);settings.beforeSubmit(validationState);checkRequiredFields(this);if(validationState.isValid){$.post(settings.action,$(this).serialize(),function(data){settings.onComplete(data);settings.showHideLoaderMethod(false);});}else{$(settings.errorMessageTarget).html(validationState.errorMessage);settings.showHideLoaderMethod(false);}});});};
// Source\sympleTech_helpers.js

jQuery.fn.disable=function(){return this.each(function(){jQuery(this).attr('disabled','disabled');});};jQuery.fn.enable=function(){return this.each(function(){jQuery(this).removeAttr('disabled');});};jQuery.fn.watch=function(id,fn){return this.each(function(){var self=this;var oldVal;if(id==='html'){oldVal=jQuery(this).html();}else{oldVal=self[id];}
$(self).data('watch_timer',setInterval(function(){var newVal;if(id==='html'){newVal=jQuery(self).html();}else{newVal=self[id];}
if(newVal!==oldVal){fn.call(self,id,oldVal,self[id]);oldVal=newVal;}},100));});return self;};jQuery.fn.unwatch=function(id){return this.each(function(){clearInterval($(this).data('watch_timer'));});};
// Source\sympleTech_KendoGrid.js

$.fn.sympleTech_KendoGrid=function(options){var settings=$.extend({'title':'','dataSourceURL':'','exportName':'GridData','model':{id:'id',fields:{}},'columns':[],'pagesize':10,'rowSelectable':false,'onRowSelected':function(selectedId,isChecked,selectedVals){},'multiSelectable':false,'searchForm':'','showExport':false,'height':null,'primaryKey':'id','dataBound':function(e){}},options);return this.each(function(){var formParams={};if(settings.searchForm!=""){var $form=$("#"+settings.searchForm);var formData=$form.serialize().split('&');_.each(formData,function(formItem){var nvp=formItem.split('=');formParams[nvp[0]]=function(){var $inputEl=$form.find('*[name='+nvp[0]+']').first();if($inputEl.attr("type")=="checkbox"){return $inputEl.is(':checked');}
return $inputEl.val();};});}
var gridDataSource=new kendo.data.DataSource({transport:{read:{url:settings.dataSourceURL,type:"POST",data:formParams}},schema:{data:function(data){return data.Items;},model:settings.model,total:function(data){return data.TotalCount;}},serverSorting:true,serverPaging:true,pageSize:settings.pagesize});var pageSizeChoices=[5,10,15];if($.inArray(settings.pagesize,pageSizeChoices)==-1){pageSizeChoices.push(settings.pagesize);pageSizeChoices.sort(function(a,b){return a-b});}
var titleBar='<div class="grid-title" style="min-height:20px;">';if(settings.showExport==true){var exportUrl=settings.dataSourceURL;if(exportUrl.indexOf('?')>-1){exportUrl+="&";}else{exportUrl+="?";}
exportUrl+="export="+settings.exportName;var exportAnchor="<a href='"+exportUrl+"' target='_blank'>Export</a>";titleBar+='<div style="float:right">'+exportAnchor+"</div>";}
titleBar+='<b>'+settings.title+'</b>';titleBar+='</div>';if(settings.multiSelectable===true){settings.columns.splice(0,0,{field:"check_row",title:" ",width:30,template:"<input class='check_row' type='checkbox' />"});}
var $kGrid=$(this);var grid=$kGrid.kendoGrid({dataSource:gridDataSource,pageable:{refresh:true,pageSize:settings.pagesize,pageSizes:pageSizeChoices},sortable:true,resizable:true,height:settings.height,selectable:(settings.rowSelectable===true)?"row":"",change:function(arg){var selected=$.map(this.select(),function(item){var $item=$(item);if($item.hasClass('sympletech-noclick')){$item.removeClass('k-state-selected');}else{return $(item).attr('data-sympletech-kendogrid-rowid');}});if(selected[0]!=null){$kGrid.attr('data-sympleTech-KendoGrid-selected',selected[0]);settings.onRowSelected(selected[0],true,selected[0]);}},toolbar:titleBar,columns:settings.columns,dataBound:function(e){_.each(e.sender._data,function(entry){var keys=Object.keys(entry);_.each(keys,function(key){var caller=entry+'.'+key;if(eval(caller)==null){eval(caller)="";}});});$kGrid.find(".k-grid-content tbody tr").each(function(){var $tr=$(this);var uid=$tr.attr("data-uid");var data_entry=_.find(gridDataSource._data,function(data_source){return data_source.uid===uid;});var id=eval('data_entry.'+settings.primaryKey);$tr.addClass('kendo-data-row').attr("data-sympleTech-KendoGrid-rowid",id);$tr.find('td').each(function(){if($(this).html()=="null"){$(this).html("");}});});if(settings.multiSelectable===true){var selectedRowIds=$kGrid.attr('data-sympleTech-KendoGrid-selected');if(selectedRowIds!=null){var selectedRowIdArray=selectedRowIds.split(',');var visibleRows=$kGrid.find('.kendo-data-row');$(visibleRows).each(function(){$row=$(this);var rowID=$row.attr('data-sympleTech-KendoGrid-rowid');if(_.contains(selectedRowIdArray,rowID)){$row.addClass('k-state-selected');$row.find('.check_row').attr('checked','checked');}});}}
if(settings.rowSelectable==true){$kGrid.find(".k-grid-content tbody tr").css('cursor','pointer').hover(function(){$(this).addClass('k-grid-hover');},function(){$(this).removeClass('k-grid-hover');});}
var colCount=$("#data-grid").find('.k-grid-header colgroup > col').length;if(gridDataSource._view.length==0){$kGrid.find('.k-grid-content tbody').append('<tr class="kendo-data-row sympletech-noclick"><td colspan="'+colCount+'" style="text-align:center"><b>No Results Found!</b></td></tr>');}
var rowCount=$kGrid.find('.k-grid-content tbody tr').length;if(rowCount<gridDataSource._take){var addRows=gridDataSource._take-rowCount;for(var i=0;i<addRows;i++){$kGrid.find('.k-grid-content tbody').append('<tr class="kendo-data-row sympletech-noclick"><td>&nbsp;</td></tr>');}}
settings.dataBound(e,gridDataSource);}});var gData=grid.data("kendoGrid");if(settings.searchForm!=""){$("#"+settings.searchForm).submit(function(e){e.preventDefault();gData.dataSource.page(1);gData.dataSource.read();});}
if(settings.multiSelectable===true){$('.check_row').live('click',function(e){var selectedVals=[];var selectedRowIds=$kGrid.attr('data-sympleTech-KendoGrid-selected');if(selectedRowIds!=null){selectedVals=selectedRowIds.split(',');}
var $row=$(this).parents('.kendo-data-row').first();var rowId=$row.attr('data-sympleTech-KendoGrid-rowid');var isChecked=$(this).is(':checked');if(isChecked){$row.addClass('k-state-selected');selectedVals.push(rowId);}else{$row.removeClass('k-state-selected');selectedVals=_.without(selectedVals,rowId);}
selectedVals=_.without(selectedVals,'',null);grid.attr('data-sympleTech-KendoGrid-selected',selectedVals);settings.onRowSelected(rowId,isChecked,selectedVals);});}
return grid;});};
